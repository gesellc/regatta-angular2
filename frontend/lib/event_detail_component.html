<div *ngIf="event != null" class="container">
    <h2>Event</h2>
    <form (ngSubmit)="onSubmit()" #eventForm="ngForm">
        <div class="form-group">
            <label for="name">Name</label>
            <input type="text" class="form-control" required [(ngModel)]="event.name" ngControl="name" #name="ngForm">
            <div [hidden]="name.valid" class="alert alert-danger">
                Name is required
            </div>
        </div>

        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label for="startDate">Start Date</label>
                    <input type="date" class="form-control" required
                           [(ngModel)]="event.startDate"
                           ngControl="startDate"
                           #startDate="ngForm">
                    <div [hidden]="startDate.valid" class="alert alert-danger">
                        Start date is required
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <label for="endDate">End Date</label>
                    <input type="date" class="form-control" required
                           [(ngModel)]="event.endDate"
                           ngControl="endDate"
                           #endDate="ngForm">
                    <div [hidden]="endDate.valid" class="alert alert-danger">
                        End date is required
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="raceCount">Race count</label>
            <input type="number" class="form-control" required [(ngModel)]="event.raceCount" ngControl="raceCount" #raceCount="ngForm">
            <div [hidden]="raceCount.valid" class="alert alert-danger">
                Race count is required
            </div>
        </div>

        <div class="form-group">
            <label for="raceUnratedOn">Race unrated on</label>
            <input type="text" class="form-control" [(ngModel)]="event.raceUnratedOn" ngControl="raceUnratedOn" #name="ngForm">
        </div>

        <div class="form-group">
            <label for="organizer">Organizer</label>
            <select class="form-control" [(ngModel)]="event.organizer">
                <option value="">-----</option>
                <option *ngFor="let sailing_club of sailing_clubs" [value]="sailing_club.url">{{sailing_club.name}}</option>
            </select>
        </div>

        <div class="form-group">
            <label for="raceCommittee">Race committee</label>
            <select class="form-control" [(ngModel)]="event.raceCommittee">
                <option value="">-----</option>
                <option *ngFor="let person of persons" [value]="person.url">{{person.firstName}} {{person.lastName}}</option>
            </select>
        </div>

        <div class="form-group">
            <label for="umpire">Umpire</label>
            <select class="form-control" [(ngModel)]="event.umpire">
                <option value="">-----</option>
                <option *ngFor="let person of persons" [value]="person.url">{{person.firstName}} {{person.lastName}}</option>
            </select>
        </div>

        <div class="form-group">
            <label for="assistants">Assistants</label>
            <my-event-assistants-list [selectedAssistants]="event.assistants" [getPersons]="getPersons" (addRequest)="addAssistant($event)" (deleteRequest)="deleteAssistant($event)"></my-event-assistants-list>
        </div>

        <button type="submit" class="btn btn-default" [disabled]="!eventForm.form.valid">Submit</button>
        <button type="button" class="btn btn-default" (click)="goBack()">Back</button>
    </form>
</div>